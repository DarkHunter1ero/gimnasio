<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="index.xhtml">
    <ui:define name="content">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>Tabla de Administracion de Usuarios</h5>
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-wrench"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="#">Config option 1</a>
                        </li>
                        <li><a href="#">Config option 2</a>
                        </li>
                    </ul>
                    <a class="close-link">
                        <i class="fa fa-times"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content">
                
                <div class="table-responsive">
                    <h:form>
                        <h:commandButton class="btn btn-primary center-block" value="Nuevo Cliente" actionListener="#{clienteController.prepareToCreate()}" action="modificarCliente.xhtml"/>
                        <p:dataTable id="tableCliente" class="table table-bordered table-striped" value="#{clienteController.items}" var="cliente" 
                                     paginator="true" paginatorPosition="bottom" rows="10" filteredValue="#{filtersList.filteredItems}" widgetVar="widget">
                            <f:facet name="header">
                                <p:outputPanel>
                                    <h:outputText value="Buscar:  " />
                                    <h:inputText id="globalFilter" onkeyup="PF('widget').filter()" style="width:150px"/>
                                </p:outputPanel>
                            </f:facet>
                            <p:column headerText="Cedula" filterStyle="display:none" filterBy="CI" filterMatchMode="contains" sortBy="#{cliente.CI}">
                                <h:outputText value="#{cliente.CI}"/>
                            </p:column>
                            <p:column headerText="Nombre" filterStyle="display:none" filterBy="nombre" filterMatchMode="contains" sortBy="#{cliente.nombre}">
                                <h:outputText value="#{cliente.nombre}"/>
                            </p:column>
                            <p:column headerText="Tel. Cel" filterStyle="display:none" filterBy="cel" filterMatchMode="contains" sortBy="#{cliente.cel}">
                                <h:outputText value="#{cliente.cel}"/>
                            </p:column>
                            <p:column headerText="Edad" filterStyle="display:none" filterBy="edad" filterMatchMode="contains" sortBy="#{cliente.edad}">
                                <h:outputText value="#{cliente.edad}"/>
                            </p:column>
                            <p:column headerText="Sexo" filterStyle="display:none" filterBy="sexo" filterMatchMode="contains" sortBy="#{cliente.sexo}">
                                <h:outputText value="#{cliente.sexo}"/>
                            </p:column>
                            <p:column headerText="Estado" filterStyle="display:none" filterBy="estado" filterMatchMode="contains" sortBy="#{cliente.estado}">
                                <h:outputText value="#{cliente.estado}"/>
                            </p:column>
                            <p:column>
                                <h:commandButton class="btn btn-primary center-block" value="Detalle" actionListener="#{clienteController.setSelected(cliente)}" action="detalleCliente.xhtml?faces-redirect=true"/>
                            </p:column>
                            <p:column>
                                <h:commandButton class="btn btn-warning center-block" value="Cobrar" actionListener="#{cobroController.cobrarACliente(cliente)}" action="gestionarCobros.xhtml?faces-redirect=true"/>
                            </p:column>
                            <p:column>
                                <h:commandButton class="btn btn-success center-block" value="Modificar" actionListener="#{clienteController.setSelected(cliente)}" action="modificarCliente.xhtml?faces-redirect=true"/>
                            </p:column>
                            <p:column>
                                <h:commandButton class="btn btn-danger center-block" value="Eleiminar" action="#{clienteController.delete(cliente)}" >
                                    <f:ajax execute="@form" render=":tableCliente" />
                                </h:commandButton>
                            </p:column>
                        </p:dataTable>
                    </h:form>
                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>

